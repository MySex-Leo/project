"use strict";module.exports=preferredLanguages;module.exports.preferredLanguages=preferredLanguages;var simpleLanguageRegExp=/^\s*([^\s\-;]+)(?:-([^\s;]+))?\s*(?:;(.*))?$/;function parseAcceptLanguage(h){var i=h.split(",");for(var j=0,f=0;j<i.length;j++){var g=parseLanguage(i[j].trim(),j);if(g){i[f++]=g}}i.length=f;return i}function parseLanguage(k,o){var n=simpleLanguageRegExp.exec(k);if(!n){return null}var m=n[1],i=n[2],l=m;if(i){l+="-"+i}var r=1;if(n[3]){var p=n[3].split(";");for(var o=0;o<p.length;o++){var q=p[o].split("=");if(q[0]==="q"){r=parseFloat(q[1])}}}return{prefix:m,suffix:i,q:r,i:o,full:l}}function getLanguagePriority(i,j,g){var k={o:-1,q:0,s:0};for(var l=0;l<j.length;l++){var h=specify(i,j[l],g);if(h&&(k.s-h.s||k.q-h.q||k.o-h.o)<0){k=h}}return k}function specify(h,g,f){var i=parseLanguage(h);if(!i){return null}var j=0;if(g.full.toLowerCase()===i.full.toLowerCase()){j|=4}else{if(g.prefix.toLowerCase()===i.full.toLowerCase()){j|=2}else{if(g.full.toLowerCase()===i.prefix.toLowerCase()){j|=1}else{if(g.full!=="*"){return null}}}}return{i:f,o:g.i,q:g.q,s:j}}function preferredLanguages(k,h){var l=parseAcceptLanguage(k===undefined?"*":k||"");if(!h){return l.filter(isQuality).sort(compareSpecs).map(getFullLanguage)}var g=h.map(function i(a,b){return getLanguagePriority(a,l,b)});return g.filter(isQuality).sort(compareSpecs).map(function j(a){return h[g.indexOf(a)]})}function compareSpecs(a,b){return(b.q-a.q)||(b.s-a.s)||(a.o-b.o)||(a.i-b.i)||0}function getFullLanguage(b){return b.full}function isQuality(b){return b.q>0};