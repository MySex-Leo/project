"use strict";module.exports=preferredEncodings;module.exports.preferredEncodings=preferredEncodings;var simpleEncodingRegExp=/^\s*([^\s;]+)\s*(?:;(.*))?$/;function parseAcceptEncoding(m){var n=m.split(",");var j=false;var k=1;for(var h=0,i=0;h<n.length;h++){var l=parseEncoding(n[h].trim(),h);if(l){n[i++]=l;j=j||specify("identity",l);k=Math.min(k,l.q||1)}}if(!j){n[i++]={encoding:"identity",q:k,i:h}}n.length=i;return n}function parseEncoding(j,h){var i=simpleEncodingRegExp.exec(j);if(!i){return null}var n=i[1];var m=1;if(i[2]){var k=i[2].split(";");for(var h=0;h<k.length;h++){var l=k[h].trim().split("=");if(l[0]==="q"){m=parseFloat(l[1]);break}}}return{encoding:n,q:m,i:h}}function getEncodingPriority(j,i,g){var k={o:-1,q:0,s:0};for(var l=0;l<i.length;l++){var h=specify(j,i[l],g);if(h&&(k.s-h.s||k.q-h.q||k.o-h.o)<0){k=h}}return k}function specify(g,f,e){var h=0;if(f.encoding.toLowerCase()===g.toLowerCase()){h|=1}else{if(f.encoding!=="*"){return null}}return{i:e,o:f.i,q:f.q,s:h}}function preferredEncodings(j,g){var k=parseAcceptEncoding(j||"");if(!g){return k.filter(isQuality).sort(compareSpecs).map(getFullEncoding)}var l=g.map(function i(a,b){return getEncodingPriority(a,k,b)});return l.filter(isQuality).sort(compareSpecs).map(function h(a){return g[l.indexOf(a)]})}function compareSpecs(a,b){return(b.q-a.q)||(b.s-a.s)||(a.o-b.o)||(a.i-b.i)||0}function getFullEncoding(b){return b.encoding}function isQuality(b){return b.q>0};